{% extends 'base_forms.html' %}
{% block content %}

<script src="/static/jquery-1.8.3.min.js" type='text/javascript'></script>
<script type='text/javascript'>
	function validation(){
		var hobby=document.getElementById('hobby');
		var factor=document.getElementById('factor');

		if(hobby.value.length == 0){
			alert('Please Select a Hobby');
			hobby.focus();
			return false;
		}else if(factor.value.length == 0){
			alert('Please Select a Hobby Factor');
			factor.focus();
			return false;
		}else{
			return true;
		}
	}
</script>
<script>
	$(document).ready(function(){
	    $('#hobby').change(function(){
		var hobby=$('#hobby').val();
		$.ajax({
			url:"{% url 'getHobbyFactor' %}",
			data:{'hobby':hobby},
			success:function(data){
				console.log(data);
				$('#factor').html(data);
			}
		})
	    })
	})
</script>

	<div class="card-title">User Hobby Factors</div>
        <hr>
	<form method='post' action="{% url 'AddCustomerHobbyFactorAction' %}">
	{% csrf_token %}
		<div class="form-group">
            		<label for="hobby">Hobby</label>
			<select class="form-control" id='hobby' name='hobby'>
				<option value=''>--hobby--</option>
				{% for h in hobby%}
					<option value='{{h.hobbyid.id}}'>{{h.hobbyid.hobby}}</option>
				{% endfor %}
			</select>
           	</div>
		<div class="form-group">
            		<label for="factor">Factor</label>
			<select class="form-control" id='factor' name='factor'>
				<option value=''>--factor--</option>
			</select>
           	</div>
		<div class="form-group">
            		<input type="submit" class="btn btn-light px-5" value='ADD' onclick='return validation()'>
          	</div>
	</form>

<!------------------------------------------------------------------------------------------------------------------------------------------>


		<!--<h3><u>Customer Hobby Factor</u></h3>
		<form method='post' action="{% url 'AddCustomerHobbyFactorAction' %}">
		{% csrf_token %}
			<table>
				<tr>
					<td>Hobby:</td>
					<td>
						<select id='hobby' name='hobby'>
							<option value=''>--hobby--</option>
							{% for h in hobby%}
								<option value='{{h.hobbyid.id}}'>{{h.hobbyid.hobby}}</option>
							{% endfor %}
						</select>
					</td>
				</tr>
				<tr>
					<td>Factor:</td>
					<td>
						<select id='factor' name='factor'>
							<option value=''>--factor--</option>
						</select>
					</td>
				</tr>
				<tr>
					<td></td>
					<td><input type='submit' value='ADD' onclick='return validation()' /></td>
				</tr>
			</table>
		</form>-->
	
	{% if messages %}
		{% for msg in messages %}
			<script>
				alert('{{msg}}')
			</script>
		{% endfor %}
	{% endif %}

{% endblock %}